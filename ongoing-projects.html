<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>EffiTrack - Ongoing Projects</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"/>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.0/dist/chart.min.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #f0f4ff, #ffffff);
      padding: 30px;
      transition: background-color 0.3s, color 0.3s;
    }
    .dark-mode {
      background-color: #121212;
      color: white;
    }
    .header {
      text-align: center;
      margin-bottom: 40px;
    }
    .header h1 {
      font-weight: bold;
      color: #2c3e50;
    }
    .project-card {
      background: white;
      box-shadow: 0 0 12px rgba(0,0,0,0.1);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
      transition: background-color 0.3s;
    }
    .dark-mode .project-card {
      background-color: #333;
    }
    .status {
      font-weight: bold;
      padding: 5px 10px;
      border-radius: 5px;
      display: inline-block;
    }
    .status.ongoing {
      background: #e0f7fa;
      color: #00796b;
    }
    .status.completed {
      background: #e8f5e9;
      color: #2e7d32;
    }
    .status.delayed {
      background: #ffebee;
      color: #c62828;
    }
    .toggle-section {
      margin-top: 40px;
      background: #fff3cd;
      border: 1px solid #ffeeba;
      padding: 20px;
      border-radius: 12px;
      text-align: center;
    }
    .dark-mode .toggle-section {
      background: #333;
      border: 1px solid #555;
    }
    .btn-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
    }
    .search-filters {
      margin-bottom: 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    #progressChart {
      max-width: 400px;
      margin: 0 auto;
    }
    .back-btn {
      position: absolute;
      top: 20px;
      left: 20px;
      background-color: #007bff;
      color: white;
      border: none;
      padding: 10px 15px;
      font-size: 16px;
      border-radius: 5px;
      cursor: pointer;
    }
    .back-btn:hover {
      background: #005bb5;
    }
    .crafted-by {
      text-align: center;
      padding: 20px;
      margin-top: 50px;
      background: var(--gradient);
      color: rgb(26, 166, 201);
      font-weight: 1000;
    }
  </style>
</head>
<body>

  <!-- Back to Dashboard Button -->
  <a href="dashboard.html" class="back-btn">Back to Dashboard</a>

  <div class="btn-toggle">
    <button class="btn btn-dark" onclick="toggleDarkMode()">üåô Toggle Dark Mode</button>
  </div>

  <div class="header">
    <h1> Project Details</h1>
    <p class="text-secondary">Monitor the status, progress, and deadlines of current projects</p>
  </div>

  <div class="container">
    <!-- Search and Filters Section -->
    <div class="search-filters">
      <div class="w-50">
        <input type="text" id="searchProject" class="form-control" placeholder="Search by project name..." oninput="filterProjects()">
      </div>
      <div class="w-25">
        <select id="statusFilter" class="form-select" onchange="filterProjects()">
          <option value="">All Statuses</option>
          <option value="Ongoing">Ongoing</option>
          <option value="Completed">Completed</option>
          <option value="Delayed">Delayed</option>
        </select>
      </div>
      <div>
        <button class="btn btn-outline-secondary" onclick="clearSearch()">Clear</button>
      </div>
    </div>

    <!-- Sort Section -->
    <div class="d-flex justify-content-end mb-4">
      <select id="sortOptions" class="form-select w-25" onchange="sortProjects()">
        <option value="name">Sort by Name</option>
        <option value="deadline">Sort by Deadline</option>
        <option value="status">Sort by Status</option>
      </select>
    </div>

    <!-- Project Cards -->
    <div id="projectCards">
      <!-- Dynamic Project Cards will go here -->
    </div>

    <!-- Alert Toggle -->
    <div class="toggle-section mt-5">
      <h5>‚ö†Ô∏è Auto Alert System</h5>
      <p>Automatically notify employees if deadlines are missed</p>
      <div class="form-check form-switch d-flex justify-content-center">
        <input class="form-check-input" type="checkbox" id="autoAlertToggle" checked>
        <label class="form-check-label ms-3" for="autoAlertToggle">Auto Alerts ON</label>
      </div>
    </div>

    <!-- Analytics Section -->
    <div class="mt-5">
      <h3> Project Progress Analytics</h3>
      <canvas id="progressChart"></canvas>
    </div>
  </div>

  <!-- Crafted by Footer -->
  <div class="crafted-by">
    <p>Crafted with ‚ù§Ô∏è by Team XYRO | EffiTrack 2025 .</p>
  </div>

  <script>
    const projects = [
      { name: "KPR Smart Campus App", team: "Arun, Sundar", deadline: "April 25, 2025", status: "Ongoing", fileUploaded: false },
      { name: "AI-Powered Traffic System", team: "Ramya, Vinoth", deadline: "March 31, 2025", status: "Completed", fileUploaded: true },
      { name: "Hand Gesture Game Interface", team: "Kumar, Dinesh", deadline: "April 15, 2025", status: "Delayed", fileUploaded: false },
      { name: "EffiTrack Dashboard System", team: "Gokul, Arun", deadline: "April 30, 2025", status: "Ongoing", fileUploaded: false },
      { name: "GO-KISSAN Farmer App", team: "Ramya, Sundar", deadline: "May 10, 2025", status: "Ongoing", fileUploaded: false }
    ];

    function loadProjects() {
      const projectContainer = document.getElementById("projectCards");
      projectContainer.innerHTML = "";
      projects.forEach(project => {
        const card = document.createElement("div");
        card.classList.add("project-card");
        card.innerHTML = `
          <h4>${project.name}</h4>
          <p><strong>Team:</strong> ${project.team}</p>
          <p><strong>Deadline:</strong> ${project.deadline}</p>
          <span class="status ${project.status.toLowerCase()}">${project.status}</span>
          <div class="mt-3">
            ${project.status === "Completed" ? '<button class="btn btn-sm btn-success">Download File</button>' : ''} 
            <button class="btn btn-sm btn-warning ms-2" onclick="updateStatus('${project.name}')">Update Status</button>
          </div>
        `;
        projectContainer.appendChild(card);
      });
    }

    function filterProjects() {
      const searchQuery = document.getElementById("searchProject").value.toLowerCase();
      const statusFilter = document.getElementById("statusFilter").value;
      const filteredProjects = projects.filter(project => {
        const isSearchMatch = project.name.toLowerCase().includes(searchQuery);
        const isStatusMatch = statusFilter ? project.status === statusFilter : true;
        return isSearchMatch && isStatusMatch;
      });

      const projectContainer = document.getElementById("projectCards");
      projectContainer.innerHTML = "";
      filteredProjects.forEach(project => {
        const card = document.createElement("div");
        card.classList.add("project-card");
        card.innerHTML = `
          <h4>${project.name}</h4>
          <p><strong>Team:</strong> ${project.team}</p>
          <p><strong>Deadline:</strong> ${project.deadline}</p>
          <span class="status ${project.status.toLowerCase()}">${project.status}</span>
          <div class="mt-3">
            ${project.status === "Completed" ? '<button class="btn btn-sm btn-success">Download File</button>' : ''} 
            <button class="btn btn-sm btn-warning ms-2" onclick="updateStatus('${project.name}')">Update Status</button>
          </div>
        `;
        projectContainer.appendChild(card);
      });
    }

    function clearSearch() {
      document.getElementById("searchProject").value = "";
      filterProjects();
    }

    function sortProjects() {
      const sortOption = document.getElementById("sortOptions").value;
      const sortedProjects = [...projects];

      if (sortOption === "name") {
        sortedProjects.sort((a, b) => a.name.localeCompare(b.name));
      } else if (sortOption === "deadline") {
        sortedProjects.sort((a, b) => new Date(a.deadline) - new Date(b.deadline));
      } else if (sortOption === "status") {
        sortedProjects.sort((a, b) => a.status.localeCompare(b.status));
      }

      const projectContainer = document.getElementById("projectCards");
      projectContainer.innerHTML = "";
      sortedProjects.forEach(project => {
        const card = document.createElement("div");
        card.classList.add("project-card");
        card.innerHTML = `
          <h4>${project.name}</h4>
          <p><strong>Team:</strong> ${project.team}</p>
          <p><strong>Deadline:</strong> ${project.deadline}</p>
          <span class="status ${project.status.toLowerCase()}">${project.status}</span>
          <div class="mt-3">
            ${project.status === "Completed" ? '<button class="btn btn-sm btn-success">Download File</button>' : ''} 
            <button class="btn btn-sm btn-warning ms-2" onclick="updateStatus('${project.name}')">Update Status</button>
          </div>
        `;
        projectContainer.appendChild(card);
      });
    }

    function updateStatus(projectName) {
      alert(`Updating status for ${projectName}`);
    }

    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
    }

    loadProjects();

    // Chart.js Analytics
    const ctx = document.getElementById('progressChart').getContext('2d');
    const progressChart = new Chart(ctx, {
      type: 'pie',
      data: {
        labels: ['Ongoing', 'Completed', 'Delayed'],
        datasets: [{
          label: 'Project Status',
          data: [3, 1, 1], // Example data (adjust based on actual projects)
          backgroundColor: ['#e0f7fa', '#e8f5e9', '#ffebee'],
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: {
            position: 'top',
          },
        }
      }
    });

  </script>
</body>
</html>
